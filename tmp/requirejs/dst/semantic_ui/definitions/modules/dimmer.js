/*!
 * # Semantic UI - Dimmer
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

(function(e,t,n,r){t=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(t){var i=e(this),s=(new Date).getTime(),o=[],u=arguments[0],a=typeof u=="string",f=[].slice.call(arguments,1),l;return i.each(function(){var c=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),h=c.selector,p=c.namespace,d=c.className,v=c.error,m="."+p,g="module-"+p,y=i.selector||"",b="ontouchstart"in n.documentElement?"touchstart":"click",w=e(this),E,S,x=this,T=w.data(g),N;N={preinitialize:function(){N.is.dimmer()?(S=w.parent(),E=w):(S=w,N.has.dimmer()?c.dimmerName?E=S.find(h.dimmer).filter("."+c.dimmerName):E=S.find(h.dimmer):E=N.create())},initialize:function(){N.debug("Initializing dimmer",c),N.bind.events(),N.set.dimmable(),N.instantiate()},instantiate:function(){N.verbose("Storing instance of module",N),T=N,w.data(g,T)},destroy:function(){N.verbose("Destroying previous module",E),N.unbind.events(),N.remove.variation(),S.off(m)},bind:{events:function(){c.on=="hover"?S.on("mouseenter"+m,N.show).on("mouseleave"+m,N.hide):c.on=="click"&&S.on(b+m,N.toggle),N.is.page()&&(N.debug("Setting as a page dimmer",S),N.set.pageDimmer()),N.is.closable()&&(N.verbose("Adding dimmer close event",E),S.on(b+m,h.dimmer,N.event.click))}},unbind:{events:function(){w.removeData(g),S.off(m)}},event:{click:function(t){N.verbose("Determining if event occured on dimmer",t);if(E.find(t.target).length===0||e(t.target).is(h.content))N.hide(),t.stopImmediatePropagation()}},addContent:function(t){var n=e(t);N.debug("Add content to dimmer",n),n.parent()[0]!==E[0]&&n.detach().appendTo(E)},create:function(){var t=e(c.template.dimmer());return c.variation&&(N.debug("Creating dimmer with variation",c.variation),t.addClass(c.variation)),c.dimmerName&&(N.debug("Creating named dimmer",c.dimmerName),t.addClass(c.dimmerName)),t.appendTo(S),t},show:function(t){t=e.isFunction(t)?t:function(){},N.debug("Showing dimmer",E,c),(!N.is.dimmed()||N.is.animating())&&N.is.enabled()?(N.animate.show(t),c.onShow.call(x),c.onChange.call(x)):N.debug("Dimmer is already shown or disabled")},hide:function(t){t=e.isFunction(t)?t:function(){},N.is.dimmed()||N.is.animating()?(N.debug("Hiding dimmer",E),N.animate.hide(t),c.onHide.call(x),c.onChange.call(x)):N.debug("Dimmer is not visible")},toggle:function(){N.verbose("Toggling dimmer visibility",E),N.is.dimmed()?N.hide():N.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},c.useCSS&&e.fn.transition!==r&&E.transition("is supported")?(c.opacity!=="auto"&&N.set.opacity(),E.transition({animation:c.transition+" in",queue:!1,duration:N.get.duration(),useFailSafe:!0,onStart:function(){N.set.dimmed()},onComplete:function(){N.set.active(),t()}})):(N.verbose("Showing dimmer animation with javascript"),N.set.dimmed(),c.opacity=="auto"&&(c.opacity=.8),E.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(N.get.duration(),c.opacity,function(){E.removeAttr("style"),N.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},c.useCSS&&e.fn.transition!==r&&E.transition("is supported")?(N.verbose("Hiding dimmer with css"),E.transition({animation:c.transition+" out",queue:!1,duration:N.get.duration(),useFailSafe:!0,onStart:function(){N.remove.dimmed()},onComplete:function(){N.remove.active(),t()}})):(N.verbose("Hiding dimmer with javascript"),N.remove.dimmed(),E.stop().fadeOut(N.get.duration(),function(){N.remove.active(),E.removeAttr("style"),t()}))}},get:{dimmer:function(){return E},duration:function(){return typeof c.duration=="object"?N.is.active()?c.duration.hide:c.duration.show:c.duration}},has:{dimmer:function(){return c.dimmerName?w.find(h.dimmer).filter("."+c.dimmerName).length>0:w.find(h.dimmer).length>0}},is:{active:function(){return E.hasClass(d.active)},animating:function(){return E.is(":animated")||E.hasClass(d.animating)},closable:function(){return c.closable=="auto"?c.on=="hover"?!1:!0:c.closable},dimmer:function(){return w.hasClass(d.dimmer)},dimmable:function(){return w.hasClass(d.dimmable)},dimmed:function(){return S.hasClass(d.dimmed)},disabled:function(){return S.hasClass(d.disabled)},enabled:function(){return!N.is.disabled()},page:function(){return S.is("body")},pageDimmer:function(){return E.hasClass(d.pageDimmer)}},can:{show:function(){return!E.hasClass(d.disabled)}},set:{opacity:function(e){var t=E.css("background-color"),n=t.split(","),r=n&&n.length==3,i=n&&n.length==4;e=c.opacity===0?0:c.opacity||e,r||i?(n[3]=e+")",t=n.join(",")):t="rgba(0, 0, 0, "+e+")",N.debug("Setting opacity to",e),E.css("background-color",t)},active:function(){E.addClass(d.active)},dimmable:function(){S.addClass(d.dimmable)},dimmed:function(){S.addClass(d.dimmed)},pageDimmer:function(){E.addClass(d.pageDimmer)},disabled:function(){E.addClass(d.disabled)},variation:function(e){e=e||c.variation,e&&E.addClass(e)}},remove:{active:function(){E.removeClass(d.active)},dimmed:function(){S.removeClass(d.dimmed)},disabled:function(){E.removeClass(d.disabled)},variation:function(e){e=e||c.variation,e&&E.removeClass(e)}},setting:function(t,n){N.debug("Changing setting",t,n);if(e.isPlainObject(t))e.extend(!0,c,t);else{if(n===r)return c[t];e.isPlainObject(c[t])?e.extend(!0,c[t],n):c[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,N,t);else{if(n===r)return N[t];N[t]=n}},debug:function(){!c.silent&&c.debug&&(c.performance?N.performance.log(arguments):(N.debug=Function.prototype.bind.call(console.info,console,c.name+":"),N.debug.apply(console,arguments)))},verbose:function(){!c.silent&&c.verbose&&c.debug&&(c.performance?N.performance.log(arguments):(N.verbose=Function.prototype.bind.call(console.info,console,c.name+":"),N.verbose.apply(console,arguments)))},error:function(){c.silent||(N.error=Function.prototype.bind.call(console.error,console,c.name+":"),N.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;c.performance&&(t=(new Date).getTime(),r=s||t,n=t-r,s=t,o.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":n})),clearTimeout(N.performance.timer),N.performance.timer=setTimeout(N.performance.display,500)},display:function(){var t=c.name+":",n=0;s=!1,clearTimeout(N.performance.timer),e.each(o,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",y&&(t+=" '"+y+"'"),i.length>1&&(t+=" ("+i.length+")"),(console.group!==r||console.table!==r)&&o.length>0&&(console.groupCollapsed(t),console.table?console.table(o):e.each(o,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),o=[]}},invoke:function(t,n,i){var s=T,o,u,a;return n=n||f,i=x||i,typeof t=="string"&&s!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(s[a])&&n!=o)s=s[a];else{if(s[a]!==r)return u=s[a],!1;if(!e.isPlainObject(s[i])||n==o)return s[i]!==r?(u=s[i],!1):(N.error(v.method,t),!1);s=s[i]}})),e.isFunction(u)?a=u.apply(i,n):u!==r&&(a=u),e.isArray(l)?l.push(a):l!==r?l=[l,a]:a!==r&&(l=a),u}},N.preinitialize(),a?(T===r&&N.initialize(),N.invoke(u)):(T!==r&&T.invoke("destroy"),N.initialize())}),l!==r?l:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}})(jQuery,window,document);