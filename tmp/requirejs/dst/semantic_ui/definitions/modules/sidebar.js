/*!
 * # Semantic UI - Sidebar
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

(function(e,t,n,r){t=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(i){var s=e(this),o=e(t),u=e(n),a=e("html"),f=e("head"),l=s.selector||"",c=(new Date).getTime(),h=[],p=arguments[0],d=typeof p=="string",v=[].slice.call(arguments,1),m=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},g;return s.each(function(){var s=e.isPlainObject(i)?e.extend(!0,{},e.fn.sidebar.settings,i):e.extend({},e.fn.sidebar.settings),y=s.selector,b=s.className,w=s.namespace,E=s.regExp,S=s.error,x="."+w,T="module-"+w,N=e(this),C=e(s.context),k=N.children(y.sidebar),L=C.children(y.fixed),A=C.children(y.pusher),O,M=this,_=N.data(T),D,P,H,B,j;j={initialize:function(){j.debug("Initializing sidebar",i),j.create.id(),B=j.get.transitionEvent(),j.is.ios()&&j.set.ios(),s.delaySetup?m(j.setup.layout):j.setup.layout(),m(function(){j.setup.cache()}),j.instantiate()},instantiate:function(){j.verbose("Storing instance of module",j),_=j,N.data(T,j)},create:{id:function(){P=(Math.random().toString(16)+"000000000").substr(2,8),D="."+P,j.verbose("Creating unique id for element",P)}},destroy:function(){j.verbose("Destroying previous module for",N),N.off(x).removeData(T),j.is.ios()&&j.remove.ios(),C.off(D),o.off(D),u.off(D)},event:{clickaway:function(e){var t=A.find(e.target).length>0||A.is(e.target),n=C.is(e.target);t&&(j.verbose("User clicked on dimmed page"),j.hide()),n&&(j.verbose("User clicked on dimmable context (scaled out page)"),j.hide())},touch:function(e){},containScroll:function(e){M.scrollTop<=0&&(M.scrollTop=1),M.scrollTop+M.offsetHeight>=M.scrollHeight&&(M.scrollTop=M.scrollHeight-M.offsetHeight-1)},scroll:function(t){e(t.target).closest(y.sidebar).length===0&&t.preventDefault()}},bind:{clickaway:function(){j.verbose("Adding clickaway events to context",C),s.closable&&C.on("click"+D,j.event.clickaway).on("touchend"+D,j.event.clickaway)},scrollLock:function(){s.scrollLock&&(j.debug("Disabling page scroll"),o.on("DOMMouseScroll"+D,j.event.scroll)),j.verbose("Adding events to contain sidebar scroll"),u.on("touchmove"+D,j.event.touch),N.on("scroll"+x,j.event.containScroll)}},unbind:{clickaway:function(){j.verbose("Removing clickaway events from context",C),C.off(D)},scrollLock:function(){j.verbose("Removing scroll lock from page"),u.off(D),o.off(D),N.off("scroll"+x)}},add:{inlineCSS:function(){var t=j.cache.width||N.outerWidth(),n=j.cache.height||N.outerHeight(),r=j.is.rtl(),i=j.get.direction(),s={left:t,right:-t,top:n,bottom:-n},o;r&&(j.verbose("RTL detected, flipping widths"),s.left=-t,s.right=t),o="<style>";if(i==="left"||i==="right")j.debug("Adding CSS rules for animation distance",t),o+=" .ui.visible."+i+".sidebar ~ .fixed,"+" .ui.visible."+i+".sidebar ~ .pusher {"+"   -webkit-transform: translate3d("+s[i]+"px, 0, 0);"+"           transform: translate3d("+s[i]+"px, 0, 0);"+" }";else if(i==="top"||i=="bottom")o+=" .ui.visible."+i+".sidebar ~ .fixed,"+" .ui.visible."+i+".sidebar ~ .pusher {"+"   -webkit-transform: translate3d(0, "+s[i]+"px, 0);"+"           transform: translate3d(0, "+s[i]+"px, 0);"+" }";if(j.is.ie()){if(i==="left"||i==="right")j.debug("Adding CSS rules for animation distance",t),o+=" body.pushable > .ui.visible."+i+".sidebar ~ .pusher:after {"+"   -webkit-transform: translate3d("+s[i]+"px, 0, 0);"+"           transform: translate3d("+s[i]+"px, 0, 0);"+" }";else if(i==="top"||i=="bottom")o+=" body.pushable > .ui.visible."+i+".sidebar ~ .pusher:after {"+"   -webkit-transform: translate3d(0, "+s[i]+"px, 0);"+"           transform: translate3d(0, "+s[i]+"px, 0);"+" }";o+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"}o+="</style>",O=e(o).appendTo(f),j.debug("Adding sizing css to head",O)}},refresh:function(){j.verbose("Refreshing selector cache"),C=e(s.context),k=C.children(y.sidebar),A=C.children(y.pusher),L=C.children(y.fixed),j.clear.cache()},refreshSidebars:function(){j.verbose("Refreshing other sidebars"),k=C.children(y.sidebar)},repaint:function(){j.verbose("Forcing repaint event"),M.style.display="none";var e=M.offsetHeight;M.scrollTop=M.scrollTop,M.style.display=""},setup:{cache:function(){j.cache={width:N.outerWidth(),height:N.outerHeight(),rtl:N.css("direction")=="rtl"}},layout:function(){C.children(y.pusher).length===0&&(j.debug("Adding wrapper element for sidebar"),j.error(S.pusher),A=e('<div class="pusher" />'),C.children().not(y.omitted).not(k).wrapAll(A),j.refresh());if(N.nextAll(y.pusher).length===0||N.nextAll(y.pusher)[0]!==A[0])j.debug("Moved sidebar to correct parent element"),j.error(S.movedSidebar,M),N.detach().prependTo(C),j.refresh();j.clear.cache(),j.set.pushable(),j.set.direction()}},attachEvents:function(t,n){var r=e(t);n=e.isFunction(j[n])?j[n]:j.toggle,r.length>0?(j.debug("Attaching sidebar events to element",t,n),r.on("click"+x,n)):j.error(S.notFound,t)},show:function(t){t=e.isFunction(t)?t:function(){};if(j.is.hidden()){j.refreshSidebars(),s.overlay&&(j.error(S.overlay),s.transition="overlay"),j.refresh();if(j.othersActive()){j.debug("Other sidebars currently visible");if(s.exclusive){if(s.transition!="overlay"){j.hideOthers(j.show);return}j.hideOthers()}else s.transition="overlay"}j.pushPage(function(){t.call(M),s.onShow.call(M)}),s.onChange.call(M),s.onVisible.call(M)}else j.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){};if(j.is.visible()||j.is.animating())j.debug("Hiding sidebar",t),j.refreshSidebars(),j.pullPage(function(){t.call(M),s.onHidden.call(M)}),s.onChange.call(M),s.onHide.call(M)},othersAnimating:function(){return k.not(N).filter("."+b.animating).length>0},othersVisible:function(){return k.not(N).filter("."+b.visible).length>0},othersActive:function(){return j.othersVisible()||j.othersAnimating()},hideOthers:function(e){var t=k.not(N).filter("."+b.visible),n=t.length,r=0;e=e||function(){},t.sidebar("hide",function(){r++,r==n&&e()})},toggle:function(){j.verbose("Determining toggled direction"),j.is.hidden()?j.show():j.hide()},pushPage:function(t){var n=j.get.transition(),r=n==="overlay"||j.othersActive()?N:A,i,o,u;t=e.isFunction(t)?t:function(){},s.transition=="scale down"&&j.scrollToTop(),j.set.transition(n),j.repaint(),i=function(){j.bind.clickaway(),j.add.inlineCSS(),j.set.animating(),j.set.visible()},o=function(){j.set.dimmed()},u=function(e){e.target==r[0]&&(r.off(B+D,u),j.remove.animating(),j.bind.scrollLock(),t.call(M))},r.off(B+D),r.on(B+D,u),m(i),s.dimPage&&!j.othersVisible()&&m(o)},pullPage:function(t){var n=j.get.transition(),r=n=="overlay"||j.othersActive()?N:A,i,o;t=e.isFunction(t)?t:function(){},j.verbose("Removing context push state",j.get.direction()),j.unbind.clickaway(),j.unbind.scrollLock(),i=function(){j.set.transition(n),j.set.animating(),j.remove.visible(),s.dimPage&&!j.othersVisible()&&A.removeClass(b.dimmed)},o=function(e){e.target==r[0]&&(r.off(B+D,o),j.remove.animating(),j.remove.transition(),j.remove.inlineCSS(),(n=="scale down"||s.returnScroll&&j.is.mobile())&&j.scrollBack(),t.call(M))},r.off(B+D),r.on(B+D,o),m(i)},scrollToTop:function(){j.verbose("Scrolling to top of page to avoid animation issues"),H=e(t).scrollTop(),N.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){j.verbose("Scrolling back to original page position"),t.scrollTo(0,H)},clear:{cache:function(){j.verbose("Clearing cached dimensions"),j.cache={}}},set:{ios:function(){a.addClass(b.ios)},pushed:function(){C.addClass(b.pushed)},pushable:function(){C.addClass(b.pushable)},dimmed:function(){A.addClass(b.dimmed)},active:function(){N.addClass(b.active)},animating:function(){N.addClass(b.animating)},transition:function(e){e=e||j.get.transition(),N.addClass(e)},direction:function(e){e=e||j.get.direction(),N.addClass(b[e])},visible:function(){N.addClass(b.visible)},overlay:function(){N.addClass(b.overlay)}},remove:{inlineCSS:function(){j.debug("Removing inline css styles",O),O&&O.length>0&&O.remove()},ios:function(){a.removeClass(b.ios)},pushed:function(){C.removeClass(b.pushed)},pushable:function(){C.removeClass(b.pushable)},active:function(){N.removeClass(b.active)},animating:function(){N.removeClass(b.animating)},transition:function(e){e=e||j.get.transition(),N.removeClass(e)},direction:function(e){e=e||j.get.direction(),N.removeClass(b[e])},visible:function(){N.removeClass(b.visible)},overlay:function(){N.removeClass(b.overlay)}},get:{direction:function(){return N.hasClass(b.top)?b.top:N.hasClass(b.right)?b.right:N.hasClass(b.bottom)?b.bottom:b.left},transition:function(){var e=j.get.direction(),t;return t=j.is.mobile()?s.mobileTransition=="auto"?s.defaultTransition.mobile[e]:s.mobileTransition:s.transition=="auto"?s.defaultTransition.computer[e]:s.transition,j.verbose("Determined transition",t),t},transitionEvent:function(){var e=n.createElement("element"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},i;for(i in t)if(e.style[i]!==r)return t[i]}},is:{ie:function(){var e=!t.ActiveXObject&&"ActiveXObject"in t,n="ActiveXObject"in t;return e||n},ios:function(){var e=navigator.userAgent,t=e.match(E.ios),n=e.match(E.mobileChrome);return t&&!n?(j.verbose("Browser was found to be iOS",e),!0):!1},mobile:function(){var e=navigator.userAgent,t=e.match(E.mobile);return t?(j.verbose("Browser was found to be mobile",e),!0):(j.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!j.is.visible()},visible:function(){return N.hasClass(b.visible)},open:function(){return j.is.visible()},closed:function(){return j.is.hidden()},vertical:function(){return N.hasClass(b.top)},animating:function(){return C.hasClass(b.animating)},rtl:function(){return j.cache.rtl===r&&(j.cache.rtl=N.css("direction")=="rtl"),j.cache.rtl}},setting:function(t,n){j.debug("Changing setting",t,n);if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===r)return s[t];e.isPlainObject(s[t])?e.extend(!0,s[t],n):s[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,j,t);else{if(n===r)return j[t];j[t]=n}},debug:function(){!s.silent&&s.debug&&(s.performance?j.performance.log(arguments):(j.debug=Function.prototype.bind.call(console.info,console,s.name+":"),j.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?j.performance.log(arguments):(j.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),j.verbose.apply(console,arguments)))},error:function(){s.silent||(j.error=Function.prototype.bind.call(console.error,console,s.name+":"),j.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;s.performance&&(t=(new Date).getTime(),r=c||t,n=t-r,c=t,h.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:M,"Execution Time":n})),clearTimeout(j.performance.timer),j.performance.timer=setTimeout(j.performance.display,500)},display:function(){var t=s.name+":",n=0;c=!1,clearTimeout(j.performance.timer),e.each(h,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",l&&(t+=" '"+l+"'"),(console.group!==r||console.table!==r)&&h.length>0&&(console.groupCollapsed(t),console.table?console.table(h):e.each(h,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),h=[]}},invoke:function(t,n,i){var s=_,o,u,a;return n=n||v,i=M||i,typeof t=="string"&&s!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(s[a])&&n!=o)s=s[a];else{if(s[a]!==r)return u=s[a],!1;if(!e.isPlainObject(s[i])||n==o)return s[i]!==r?(u=s[i],!1):(j.error(S.method,t),!1);s=s[i]}})),e.isFunction(u)?a=u.apply(i,n):u!==r&&(a=u),e.isArray(g)?g.push(a):g!==r?g=[g,a]:a!==r&&(g=a),u}},d?(_===r&&j.initialize(),j.invoke(p)):(_!==r&&j.invoke("destroy"),j.initialize())}),g!==r?g:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document);