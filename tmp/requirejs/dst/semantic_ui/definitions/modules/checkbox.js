/*!
 * # Semantic UI - Checkbox
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

(function(e,t,n,r){t=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(i){var s=e(this),o=s.selector||"",u=(new Date).getTime(),a=[],f=arguments[0],l=typeof f=="string",c=[].slice.call(arguments,1),h;return s.each(function(){var s=e.extend(!0,{},e.fn.checkbox.settings,i),p=s.className,d=s.namespace,v=s.selector,m=s.error,g="."+d,y="module-"+d,b=e(this),w=e(this).children(v.label),E=e(this).children(v.input),S=E[0],x=!1,T=!1,N=b.data(y),C,k=this,L;L={initialize:function(){L.verbose("Initializing checkbox",s),L.create.label(),L.bind.events(),L.set.tabbable(),L.hide.input(),L.observeChanges(),L.instantiate(),L.setup()},instantiate:function(){L.verbose("Storing instance of module",L),N=L,b.data(y,L)},destroy:function(){L.verbose("Destroying module"),L.unbind.events(),L.show.input(),b.removeData(y)},fix:{reference:function(){b.is(v.input)&&(L.debug("Behavior called on <input> adjusting invoked element"),b=b.closest(v.checkbox),L.refresh())}},setup:function(){L.set.initialLoad(),L.is.indeterminate()?(L.debug("Initial value is indeterminate"),L.indeterminate()):L.is.checked()?(L.debug("Initial value is checked"),L.check()):(L.debug("Initial value is unchecked"),L.uncheck()),L.remove.initialLoad()},refresh:function(){w=b.children(v.label),E=b.children(v.input),S=E[0]},hide:{input:function(){L.verbose("Modifying <input> z-index to be unselectable"),E.addClass(p.hidden)}},show:{input:function(){L.verbose("Modifying <input> z-index to be selectable"),E.removeClass(p.hidden)}},observeChanges:function(){"MutationObserver"in t&&(C=new MutationObserver(function(e){L.debug("DOM tree modified, updating selector cache"),L.refresh()}),C.observe(k,{childList:!0,subtree:!0}),L.debug("Setting up mutation observer",C))},attachEvents:function(t,n){var r=e(t);n=e.isFunction(L[n])?L[n]:L.toggle,r.length>0?(L.debug("Attaching checkbox events to element",t,n),r.on("click"+g,n)):L.error(m.notFound)},event:{click:function(t){var n=e(t.target);if(n.is(v.input)){L.verbose("Using default check action on initialized checkbox");return}if(n.is(v.link)){L.debug("Clicking link inside checkbox, skipping toggle");return}L.toggle(),E.focus(),t.preventDefault()},keydown:function(e){var t=e.which,n={enter:13,space:32,escape:27};t==n.escape?(L.verbose("Escape key pressed blurring field"),E.blur(),T=!0):!!e.ctrlKey||t!=n.space&&t!=n.enter?T=!1:(L.verbose("Enter/space key pressed, toggling checkbox"),L.toggle(),T=!0)},keyup:function(e){T&&e.preventDefault()}},check:function(){if(!L.should.allowCheck())return;L.debug("Checking checkbox",E),L.set.checked(),L.should.ignoreCallbacks()||(s.onChecked.call(S),s.onChange.call(S))},uncheck:function(){if(!L.should.allowUncheck())return;L.debug("Unchecking checkbox"),L.set.unchecked(),L.should.ignoreCallbacks()||(s.onUnchecked.call(S),s.onChange.call(S))},indeterminate:function(){if(L.should.allowIndeterminate()){L.debug("Checkbox is already indeterminate");return}L.debug("Making checkbox indeterminate"),L.set.indeterminate(),L.should.ignoreCallbacks()||(s.onIndeterminate.call(S),s.onChange.call(S))},determinate:function(){if(L.should.allowDeterminate()){L.debug("Checkbox is already determinate");return}L.debug("Making checkbox determinate"),L.set.determinate(),L.should.ignoreCallbacks()||(s.onDeterminate.call(S),s.onChange.call(S))},enable:function(){if(L.is.enabled()){L.debug("Checkbox is already enabled");return}L.debug("Enabling checkbox"),L.set.enabled(),s.onEnable.call(S),s.onEnabled.call(S)},disable:function(){if(L.is.disabled()){L.debug("Checkbox is already disabled");return}L.debug("Disabling checkbox"),L.set.disabled(),s.onDisable.call(S),s.onDisabled.call(S)},get:{radios:function(){var t=L.get.name();return e('input[name="'+t+'"]').closest(v.checkbox)},otherRadios:function(){return L.get.radios().not(b)},name:function(){return E.attr("name")}},is:{initialLoad:function(){return x},radio:function(){return E.hasClass(p.radio)||E.attr("type")=="radio"},indeterminate:function(){return E.prop("indeterminate")!==r&&E.prop("indeterminate")},checked:function(){return E.prop("checked")!==r&&E.prop("checked")},disabled:function(){return E.prop("disabled")!==r&&E.prop("disabled")},enabled:function(){return!L.is.disabled()},determinate:function(){return!L.is.indeterminate()},unchecked:function(){return!L.is.checked()}},should:{allowCheck:function(){return L.is.determinate()&&L.is.checked()&&!L.should.forceCallbacks()?(L.debug("Should not allow check, checkbox is already checked"),!1):s.beforeChecked.apply(S)===!1?(L.debug("Should not allow check, beforeChecked cancelled"),!1):!0},allowUncheck:function(){return L.is.determinate()&&L.is.unchecked()&&!L.should.forceCallbacks()?(L.debug("Should not allow uncheck, checkbox is already unchecked"),!1):s.beforeUnchecked.apply(S)===!1?(L.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1):!0},allowIndeterminate:function(){return L.is.indeterminate()&&!L.should.forceCallbacks()?(L.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):s.beforeIndeterminate.apply(S)===!1?(L.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1):!0},allowDeterminate:function(){return L.is.determinate()&&!L.should.forceCallbacks()?(L.debug("Should not allow determinate, checkbox is already determinate"),!1):s.beforeDeterminate.apply(S)===!1?(L.debug("Should not allow determinate, beforeDeterminate cancelled"),!1):!0},forceCallbacks:function(){return L.is.initialLoad()&&s.fireOnInit},ignoreCallbacks:function(){return x&&!s.fireOnInit}},can:{change:function(){return!(b.hasClass(p.disabled)||b.hasClass(p.readOnly)||E.prop("disabled")||E.prop("readonly"))},uncheck:function(){return typeof s.uncheckable=="boolean"?s.uncheckable:!L.is.radio()}},set:{initialLoad:function(){x=!0},checked:function(){L.verbose("Setting class to checked"),b.removeClass(p.indeterminate).addClass(p.checked),L.is.radio()&&L.uncheckOthers();if(!L.is.indeterminate()&&L.is.checked()){L.debug("Input is already checked, skipping input property change");return}L.verbose("Setting state to checked",S),E.prop("indeterminate",!1).prop("checked",!0),L.trigger.change()},unchecked:function(){L.verbose("Removing checked class"),b.removeClass(p.indeterminate).removeClass(p.checked);if(!L.is.indeterminate()&&L.is.unchecked()){L.debug("Input is already unchecked");return}L.debug("Setting state to unchecked"),E.prop("indeterminate",!1).prop("checked",!1),L.trigger.change()},indeterminate:function(){L.verbose("Setting class to indeterminate"),b.addClass(p.indeterminate);if(L.is.indeterminate()){L.debug("Input is already indeterminate, skipping input property change");return}L.debug("Setting state to indeterminate"),E.prop("indeterminate",!0),L.trigger.change()},determinate:function(){L.verbose("Removing indeterminate class"),b.removeClass(p.indeterminate);if(L.is.determinate()){L.debug("Input is already determinate, skipping input property change");return}L.debug("Setting state to determinate"),E.prop("indeterminate",!1)},disabled:function(){L.verbose("Setting class to disabled"),b.addClass(p.disabled);if(L.is.disabled()){L.debug("Input is already disabled, skipping input property change");return}L.debug("Setting state to disabled"),E.prop("disabled","disabled"),L.trigger.change()},enabled:function(){L.verbose("Removing disabled class"),b.removeClass(p.disabled);if(L.is.enabled()){L.debug("Input is already enabled, skipping input property change");return}L.debug("Setting state to enabled"),E.prop("disabled",!1),L.trigger.change()},tabbable:function(){L.verbose("Adding tabindex to checkbox"),E.attr("tabindex")===r&&E.attr("tabindex",0)}},remove:{initialLoad:function(){x=!1}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=E[0];t&&(L.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){E.prevAll(v.label).length>0?(E.prev(v.label).detach().insertAfter(E),L.debug("Moving existing label",w)):L.has.label()||(w=e("<label>").insertAfter(E),L.debug("Creating label",w))}},has:{label:function(){return w.length>0}},bind:{events:function(){L.verbose("Attaching checkbox events"),b.on("click"+g,L.event.click).on("keydown"+g,v.input,L.event.keydown).on("keyup"+g,v.input,L.event.keyup)}},unbind:{events:function(){L.debug("Removing events"),b.off(g)}},uncheckOthers:function(){var e=L.get.otherRadios();L.debug("Unchecking other radios",e),e.removeClass(p.checked)},toggle:function(){if(!L.can.change()){L.is.radio()||L.debug("Checkbox is read-only or disabled, ignoring toggle");return}L.is.indeterminate()||L.is.unchecked()?(L.debug("Currently unchecked"),L.check()):L.is.checked()&&L.can.uncheck()&&(L.debug("Currently checked"),L.uncheck())},setting:function(t,n){L.debug("Changing setting",t,n);if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===r)return s[t];e.isPlainObject(s[t])?e.extend(!0,s[t],n):s[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,L,t);else{if(n===r)return L[t];L[t]=n}},debug:function(){!s.silent&&s.debug&&(s.performance?L.performance.log(arguments):(L.debug=Function.prototype.bind.call(console.info,console,s.name+":"),L.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?L.performance.log(arguments):(L.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),L.verbose.apply(console,arguments)))},error:function(){s.silent||(L.error=Function.prototype.bind.call(console.error,console,s.name+":"),L.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;s.performance&&(t=(new Date).getTime(),r=u||t,n=t-r,u=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(L.performance.timer),L.performance.timer=setTimeout(L.performance.display,500)},display:function(){var t=s.name+":",n=0;u=!1,clearTimeout(L.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(console.group!==r||console.table!==r)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var s=N,o,u,a;return n=n||c,i=k||i,typeof t=="string"&&s!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(s[a])&&n!=o)s=s[a];else{if(s[a]!==r)return u=s[a],!1;if(!e.isPlainObject(s[i])||n==o)return s[i]!==r?(u=s[i],!1):(L.error(m.method,t),!1);s=s[i]}})),e.isFunction(u)?a=u.apply(i,n):u!==r&&(a=u),e.isArray(h)?h.push(a):h!==r?h=[h,a]:a!==r&&(h=a),u}},l?(N===r&&L.initialize(),L.invoke(f)):(N!==r&&N.invoke("destroy"),L.initialize())}),h!==r?h:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}})(jQuery,window,document);