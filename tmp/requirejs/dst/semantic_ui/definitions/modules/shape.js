/*!
 * # Semantic UI - Shape
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

(function(e,t,n,r){t=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(i){var s=e(this),o=e("body"),u=(new Date).getTime(),a=[],f=arguments[0],l=typeof f=="string",c=[].slice.call(arguments,1),h=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},p;return s.each(function(){var t=s.selector||"",o=e.isPlainObject(i)?e.extend(!0,{},e.fn.shape.settings,i):e.extend({},e.fn.shape.settings),d=o.namespace,v=o.selector,m=o.error,g=o.className,y="."+d,b="module-"+d,w=e(this),E=w.find(v.sides),S=w.find(v.side),x=!1,T,N,C=this,k=w.data(b),L;L={initialize:function(){L.verbose("Initializing module for",C),L.set.defaultSide(),L.instantiate()},instantiate:function(){L.verbose("Storing instance of module",L),k=L,w.data(b,k)},destroy:function(){L.verbose("Destroying previous module for",C),w.removeData(b).off(y)},refresh:function(){L.verbose("Refreshing selector cache for",C),w=e(C),E=e(this).find(v.shape),S=e(this).find(v.side)},repaint:function(){L.verbose("Forcing repaint event");var e=E[0]||n.createElement("div"),t=e.offsetWidth},animate:function(e,t){L.verbose("Animating box with properties",e),t=t||function(e){L.verbose("Executing animation callback"),e!==r&&e.stopPropagation(),L.reset(),L.set.active()},o.beforeChange.call(N[0]),L.get.transitionEvent()?(L.verbose("Starting CSS animation"),w.addClass(g.animating),E.css(e).one(L.get.transitionEvent(),t),L.set.duration(o.duration),h(function(){w.addClass(g.animating),T.addClass(g.hidden)})):t()},queue:function(e){L.debug("Queueing animation of",e),E.one(L.get.transitionEvent(),function(){L.debug("Executing queued animation"),setTimeout(function(){w.shape(e)},0)})},reset:function(){L.verbose("Animating states reset"),w.removeClass(g.animating).attr("style","").removeAttr("style"),E.attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style").removeClass(g.hidden),N.removeClass(g.animating).attr("style","").removeAttr("style")},is:{complete:function(){return S.filter("."+g.active)[0]==N[0]},animating:function(){return w.hasClass(g.animating)}},set:{defaultSide:function(){T=w.find("."+o.className.active),N=T.next(v.side).length>0?T.next(v.side):w.find(v.side).first(),x=!1,L.verbose("Active side set to",T),L.verbose("Next side set to",N)},duration:function(e){e=e||o.duration,e=typeof e=="number"?e+"ms":e,L.verbose("Setting animation duration",e),(o.duration||o.duration===0)&&E.add(S).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=w.find("."+o.className.active),t=e.outerWidth(!0),n=e.outerHeight(!0);w.css({width:t,height:n})},stageSize:function(){var e=w.clone().addClass(g.loading),t=e.find("."+o.className.active),n=o.width=="next"?i.outerWidth(!0):o.width=="initial"?w.width():o.width,r=o.height=="next"?i.outerHeight(!0):o.height=="initial"?w.height():o.height,i=x?e.find(v.side).eq(x):t.next(v.side).length>0?t.next(v.side):e.find(v.side).first();t.removeClass(g.active),i.addClass(g.active),e.insertAfter(w),e.remove(),o.width!="auto"&&(w.css("width",n+o.jitter),L.verbose("Specifying width during animation",n)),o.height!="auto"&&(w.css("height",r+o.jitter),L.verbose("Specifying height during animation",r))},nextSide:function(e){x=e,N=S.filter(e),x=S.index(N),N.length===0&&(L.set.defaultSide(),L.error(m.side)),L.verbose("Next side manually set to",N)},active:function(){L.verbose("Setting new side to active",N),S.removeClass(g.active),N.addClass(g.active),o.onChange.call(N[0]),L.set.defaultSide()}},flip:{up:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip up"):(L.debug("Flipping up",N),L.set.stageSize(),L.stage.above(),L.animate(L.get.transform.up()))},down:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip down"):(L.debug("Flipping down",N),L.set.stageSize(),L.stage.below(),L.animate(L.get.transform.down()))},left:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip left"):(L.debug("Flipping left",N),L.set.stageSize(),L.stage.left(),L.animate(L.get.transform.left()))},right:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip right"):(L.debug("Flipping right",N),L.set.stageSize(),L.stage.right(),L.animate(L.get.transform.right()))},over:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip over"):(L.debug("Flipping over",N),L.set.stageSize(),L.stage.behind(),L.animate(L.get.transform.over()))},back:function(){if(L.is.complete()&&!L.is.animating()&&!o.allowRepeats){L.debug("Side already visible",N);return}L.is.animating()?L.queue("flip back"):(L.debug("Flipping back",N),L.set.stageSize(),L.stage.behind(),L.animate(L.get.transform.back()))}},get:{transform:{up:function(){var e={y:-((T.outerHeight(!0)-N.outerHeight(!0))/2),z:-(T.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((T.outerHeight(!0)-N.outerHeight(!0))/2),z:-(T.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((T.outerWidth(!0)-N.outerWidth(!0))/2),z:-(T.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((T.outerWidth(!0)-N.outerWidth(!0))/2),z:-(T.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((T.outerWidth(!0)-N.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((T.outerWidth(!0)-N.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e=n.createElement("element"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},i;for(i in t)if(e.style[i]!==r)return t[i]},nextSide:function(){return T.next(v.side).length>0?T.next(v.side):w.find(v.side).first()}},stage:{above:function(){var e={origin:(T.outerHeight(!0)-N.outerHeight(!0))/2,depth:{active:N.outerHeight(!0)/2,next:T.outerHeight(!0)/2}};L.verbose("Setting the initial animation position as above",N,e),E.css({transform:"translateZ(-"+e.depth.active+"px)"}),T.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),N.addClass(g.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(T.outerHeight(!0)-N.outerHeight(!0))/2,depth:{active:N.outerHeight(!0)/2,next:T.outerHeight(!0)/2}};L.verbose("Setting the initial animation position as below",N,e),E.css({transform:"translateZ(-"+e.depth.active+"px)"}),T.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),N.addClass(g.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={active:T.outerWidth(!0),next:N.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};L.verbose("Setting the initial animation position as left",N,t),E.css({transform:"translateZ(-"+t.depth.active+"px)"}),T.css({transform:"rotateY(0deg) translateZ("+t.depth.active+"px)"}),N.addClass(g.animating).css({left:t.origin+"px",transform:"rotateY(-90deg) translateZ("+t.depth.next+"px)"})},right:function(){var e={active:T.outerWidth(!0),next:N.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};L.verbose("Setting the initial animation position as left",N,t),E.css({transform:"translateZ(-"+t.depth.active+"px)"}),T.css({transform:"rotateY(0deg) translateZ("+t.depth.active+"px)"}),N.addClass(g.animating).css({left:t.origin+"px",transform:"rotateY(90deg) translateZ("+t.depth.next+"px)"})},behind:function(){var e={active:T.outerWidth(!0),next:N.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};L.verbose("Setting the initial animation position as behind",N,t),T.css({transform:"rotateY(0deg)"}),N.addClass(g.animating).css({left:t.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){L.debug("Changing setting",t,n);if(e.isPlainObject(t))e.extend(!0,o,t);else{if(n===r)return o[t];e.isPlainObject(o[t])?e.extend(!0,o[t],n):o[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,L,t);else{if(n===r)return L[t];L[t]=n}},debug:function(){!o.silent&&o.debug&&(o.performance?L.performance.log(arguments):(L.debug=Function.prototype.bind.call(console.info,console,o.name+":"),L.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?L.performance.log(arguments):(L.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),L.verbose.apply(console,arguments)))},error:function(){o.silent||(L.error=Function.prototype.bind.call(console.error,console,o.name+":"),L.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;o.performance&&(t=(new Date).getTime(),r=u||t,n=t-r,u=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(L.performance.timer),L.performance.timer=setTimeout(L.performance.display,500)},display:function(){var n=o.name+":",i=0;u=!1,clearTimeout(L.performance.timer),e.each(a,function(e,t){i+=t["Execution Time"]}),n+=" "+i+"ms",t&&(n+=" '"+t+"'"),s.length>1&&(n+=" ("+s.length+")"),(console.group!==r||console.table!==r)&&a.length>0&&(console.groupCollapsed(n),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var s=k,o,u,a;return n=n||c,i=C||i,typeof t=="string"&&s!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(s[a])&&n!=o)s=s[a];else{if(s[a]!==r)return u=s[a],!1;if(!e.isPlainObject(s[i])||n==o)return s[i]!==r?(u=s[i],!1):!1;s=s[i]}})),e.isFunction(u)?a=u.apply(i,n):u!==r&&(a=u),e.isArray(p)?p.push(a):p!==r?p=[p,a]:a!==r&&(p=a),u}},l?(k===r&&L.initialize(),L.invoke(f)):(k!==r&&k.invoke("destroy"),L.initialize())}),p!==r?p:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document);