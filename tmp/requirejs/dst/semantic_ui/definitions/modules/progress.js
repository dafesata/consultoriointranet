/*!
 * # Semantic UI - Progress
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

(function(e,t,n,r){t=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();var i=typeof t!="undefined"&&t.Math==Math?t:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();e.fn.progress=function(t){var i=e(this),s=i.selector||"",o=(new Date).getTime(),u=[],a=arguments[0],f=typeof a=="string",l=[].slice.call(arguments,1),c;return i.each(function(){var i=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),h=i.className,p=i.metadata,d=i.namespace,v=i.selector,m=i.error,g="."+d,y="module-"+d,b=e(this),w=e(this).find(v.bar),E=e(this).find(v.progress),S=e(this).find(v.label),x=this,T=b.data(y),N=!1,C,k;k={initialize:function(){k.debug("Initializing progress bar",i),k.set.duration(),k.set.transitionEvent(),k.read.metadata(),k.read.settings(),k.instantiate()},instantiate:function(){k.verbose("Storing instance of progress",k),T=k,b.data(y,k)},destroy:function(){k.verbose("Destroying previous progress for",b),clearInterval(T.interval),k.remove.state(),b.removeData(y),T=r},reset:function(){k.remove.nextValue(),k.update.progress(0)},complete:function(){if(k.percent===r||k.percent<100)k.remove.progressPoll(),k.set.percent(100)},read:{metadata:function(){var e={percent:b.data(p.percent),total:b.data(p.total),value:b.data(p.value)};e.percent&&(k.debug("Current percent value set from metadata",e.percent),k.set.percent(e.percent)),e.total&&(k.debug("Total value set from metadata",e.total),k.set.total(e.total)),e.value&&(k.debug("Current value set from metadata",e.value),k.set.value(e.value),k.set.progress(e.value))},settings:function(){i.total!==!1&&(k.debug("Current total set in settings",i.total),k.set.total(i.total)),i.value!==!1&&(k.debug("Current value set in settings",i.value),k.set.value(i.value),k.set.progress(k.value)),i.percent!==!1&&(k.debug("Current percent set in settings",i.percent),k.set.percent(i.percent))}},increment:function(e){var t,n,r;k.has.total()?(n=k.get.value(),e=e||1,r=n+e):(n=k.get.percent(),e=e||k.get.randomValue(),r=n+e,t=100,k.debug("Incrementing percentage by",n,r)),r=k.get.normalizedValue(r),k.set.progress(r)},decrement:function(e){var t=k.get.total(),n,r;t?(n=k.get.value(),e=e||1,r=n-e,k.debug("Decrementing value by",e,n)):(n=k.get.percent(),e=e||k.get.randomValue(),r=n-e,k.debug("Decrementing percentage by",e,n)),r=k.get.normalizedValue(r),k.set.progress(r)},has:{progressPoll:function(){return k.progressPoll},total:function(){return k.get.total()!==!1}},get:{text:function(e){var t=k.value||0,n=k.total||0,r=N?k.get.displayPercent():k.percent||0,i=k.total>0?n-t:100-r;return e=e||"",e=e.replace("{value}",t).replace("{total}",n).replace("{left}",i).replace("{percent}",r),k.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return k.debug("Value cannot decrement below 0"),0;if(k.has.total()){if(e>k.total)return k.debug("Value cannot increment above total",k.total),k.total}else if(e>100)return k.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return i.updateInterval=="auto"?i.duration:i.updateInterval},randomValue:function(){return k.debug("Generating random increment percentage"),Math.floor(Math.random()*i.random.max+i.random.min)},numericValue:function(e){return typeof e=="string"?e.replace(/[^\d.]/g,"")!==""?+e.replace(/[^\d.]/g,""):!1:e},transitionEnd:function(){var e=n.createElement("element"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},i;for(i in t)if(e.style[i]!==r)return t[i]},displayPercent:function(){var e=w.width(),t=b.width(),n=parseInt(w.css("min-width"),10),r=e>n?e/t*100:k.percent;return i.precision>0?Math.round(r*10*i.precision)/(10*i.precision):Math.round(r)},percent:function(){return k.percent||0},value:function(){return k.nextValue||k.value||0},total:function(){return k.total||!1}},create:{progressPoll:function(){k.progressPoll=setTimeout(function(){k.update.toNextValue(),k.remove.progressPoll()},k.get.updateInterval())}},is:{complete:function(){return k.is.success()||k.is.warning()||k.is.error()},success:function(){return b.hasClass(h.success)},warning:function(){return b.hasClass(h.warning)},error:function(){return b.hasClass(h.error)},active:function(){return b.hasClass(h.active)},visible:function(){return b.is(":visible")}},remove:{progressPoll:function(){k.verbose("Removing progress poll timer"),k.progressPoll&&(clearTimeout(k.progressPoll),delete k.progressPoll)},nextValue:function(){k.verbose("Removing progress value stored for next update"),delete k.nextValue},state:function(){k.verbose("Removing stored state"),delete k.total,delete k.percent,delete k.value},active:function(){k.verbose("Removing active state"),b.removeClass(h.active)},success:function(){k.verbose("Removing success state"),b.removeClass(h.success)},warning:function(){k.verbose("Removing warning state"),b.removeClass(h.warning)},error:function(){k.verbose("Removing error state"),b.removeClass(h.error)}},set:{barWidth:function(e){e>100?k.error(m.tooHigh,e):e<0?k.error(m.tooLow,e):(w.css("width",e+"%"),b.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||i.duration,e=typeof e=="number"?e+"ms":e,k.verbose("Setting progress bar transition duration",e),w.css({"transition-duration":e})},percent:function(e){e=typeof e=="string"?+e.replace("%",""):e,e=i.precision>0?Math.round(e*10*i.precision)/(10*i.precision):Math.round(e),k.percent=e,k.has.total()||(k.value=i.precision>0?Math.round(e/100*k.total*10*i.precision)/(10*i.precision):Math.round(e/100*k.total*10)/10,i.limitValues&&(k.value=k.value>100?100:k.value<0?0:k.value)),k.set.barWidth(e),k.set.labelInterval(),k.set.labels(),i.onChange.call(x,e,k.value,k.total)},labelInterval:function(){var t=function(){k.verbose("Bar finished animating, removing continuous label updates"),clearInterval(k.interval),N=!1,k.set.labels()};clearInterval(k.interval),w.one(C+g,t),N=!0,k.interval=setInterval(function(){var t=e.contains(n.documentElement,x);t||(clearInterval(k.interval),N=!1),k.set.labels()},i.framerate)},labels:function(){k.verbose("Setting both bar progress and outer label text"),k.set.barLabel(),k.set.state()},label:function(e){e=e||"",e&&(e=k.get.text(e),k.verbose("Setting label to text",e),S.text(e))},state:function(e){e=e!==r?e:k.percent,e===100?i.autoSuccess&&!(k.is.warning()||k.is.error()||k.is.success())?(k.set.success(),k.debug("Automatically triggering success at 100%")):(k.verbose("Reached 100% removing active state"),k.remove.active(),k.remove.progressPoll()):e>0?(k.verbose("Adjusting active progress bar label",e),k.set.active()):(k.remove.active(),k.set.label(i.text.active))},barLabel:function(e){e!==r?E.text(k.get.text(e)):i.label=="ratio"&&k.total?(k.verbose("Adding ratio to bar label"),E.text(k.get.text(i.text.ratio))):i.label=="percent"&&(k.verbose("Adding percentage to bar label"),E.text(k.get.text(i.text.percent)))},active:function(e){e=e||i.text.active,k.debug("Setting active state"),i.showActivity&&!k.is.active()&&b.addClass(h.active),k.remove.warning(),k.remove.error(),k.remove.success(),e=i.onLabelUpdate("active",e,k.value,k.total),e&&k.set.label(e),w.one(C+g,function(){i.onActive.call(x,k.value,k.total)})},success:function(e){e=e||i.text.success||i.text.active,k.debug("Setting success state"),b.addClass(h.success),k.remove.active(),k.remove.warning(),k.remove.error(),k.complete(),i.text.success?(e=i.onLabelUpdate("success",e,k.value,k.total),k.set.label(e)):(e=i.onLabelUpdate("active",e,k.value,k.total),k.set.label(e)),w.one(C+g,function(){i.onSuccess.call(x,k.total)})},warning:function(e){e=e||i.text.warning,k.debug("Setting warning state"),b.addClass(h.warning),k.remove.active(),k.remove.success(),k.remove.error(),k.complete(),e=i.onLabelUpdate("warning",e,k.value,k.total),e&&k.set.label(e),w.one(C+g,function(){i.onWarning.call(x,k.value,k.total)})},error:function(e){e=e||i.text.error,k.debug("Setting error state"),b.addClass(h.error),k.remove.active(),k.remove.success(),k.remove.warning(),k.complete(),e=i.onLabelUpdate("error",e,k.value,k.total),e&&k.set.label(e),w.one(C+g,function(){i.onError.call(x,k.value,k.total)})},transitionEvent:function(){C=k.get.transitionEnd()},total:function(e){k.total=e},value:function(e){k.value=e},progress:function(e){k.has.progressPoll()?(k.debug("Updated within interval, setting next update to use new value",e),k.set.nextValue(e)):(k.debug("First update in progress update interval, immediately updating",e),k.update.progress(e),k.create.progressPoll())},nextValue:function(e){k.nextValue=e}},update:{toNextValue:function(){var e=k.nextValue;e&&(k.debug("Update interval complete using last updated value",e),k.update.progress(e),k.remove.nextValue())},progress:function(e){var t;e=k.get.numericValue(e),e===!1&&k.error(m.nonNumeric,e),e=k.get.normalizedValue(e),k.has.total()?(k.set.value(e),t=e/k.total*100,k.debug("Calculating percent complete from total",t),k.set.percent(t)):(t=e,k.debug("Setting value to exact percentage value",t),k.set.percent(t))}},setting:function(t,n){k.debug("Changing setting",t,n);if(e.isPlainObject(t))e.extend(!0,i,t);else{if(n===r)return i[t];e.isPlainObject(i[t])?e.extend(!0,i[t],n):i[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,k,t);else{if(n===r)return k[t];k[t]=n}},debug:function(){!i.silent&&i.debug&&(i.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,i.name+":"),k.debug.apply(console,arguments)))},verbose:function(){!i.silent&&i.verbose&&i.debug&&(i.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,i.name+":"),k.verbose.apply(console,arguments)))},error:function(){i.silent||(k.error=Function.prototype.bind.call(console.error,console,i.name+":"),k.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;i.performance&&(t=(new Date).getTime(),r=o||t,n=t-r,o=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":n})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,500)},display:function(){var t=i.name+":",n=0;o=!1,clearTimeout(k.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==r||console.table!==r)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,i){var s=T,o,u,a;return n=n||l,i=x||i,typeof t=="string"&&s!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(s[a])&&n!=o)s=s[a];else{if(s[a]!==r)return u=s[a],!1;if(!e.isPlainObject(s[i])||n==o)return s[i]!==r?(u=s[i],!1):(k.error(m.method,t),!1);s=s[i]}})),e.isFunction(u)?a=u.apply(i,n):u!==r&&(a=u),e.isArray(c)?c.push(a):c!==r?c=[c,a]:a!==r&&(c=a),u}},f?(T===r&&k.initialize(),k.invoke(a)):(T!==r&&T.invoke("destroy"),k.initialize())}),c!==r?c:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}})(jQuery,window,document);